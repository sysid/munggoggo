(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{10:function(e,n,t){},20:function(e,n,t){e.exports=t(26)},26:function(e,n,t){"use strict";t.r(n);t(21);var a=t(0),c=t.n(a),r=t(11),o=t.n(r),l=(t(10),t(8)),s=t(12),i=t.n(s),u=t(6),m=t(5),d=t(19),f=t(15),E=t(7),p=function(e){var n=e.behaviour,t=e.ws,r=e.is_online,o=Object(a.useState)(!0),s=Object(l.a)(o,2),i=s[0],p=s[1];Object(a.useEffect)((function(){p("running"!==n.state)}),[]);return r?c.a.createElement(E.a,{className:"behaviour mx-auto"},c.a.createElement(u.a,{className:"mx-auto"},c.a.createElement(m.a,null,c.a.createElement(d.a,{variant:i?"success":"primary",onClick:function(){p(!i);var e={originator:n,command:i?"Start":"Stop"};!function(e){try{console.log(e),t.send(e)}catch(n){console.error(n)}}(JSON.stringify(e))}},i?"ON":"OFF")),c.a.createElement(m.a,{className:"d-flex align-items-center"},n.name),c.a.createElement(m.a,{className:"d-flex align-items-center"},r&&"running"===n.state&&c.a.createElement(f.a,{animation:"grow",size:"sm"})))):null},b=t(16),g=function(e){var n=e.peer,t=n.behaviours,a=i()(n.name);return c.a.createElement(E.a,{className:"agent p-2"},c.a.createElement(E.a.Header,null,n.name),c.a.createElement(E.a.Body,null,c.a.createElement(u.a,null,c.a.createElement(m.a,{sm:3},c.a.createElement(b.a,{roundedCircle:!0,src:"http://www.gravatar.com/avatar/".concat(a,"?d=monsterid"),alt:"Logo"})),c.a.createElement(m.a,{className:"d-flex align-items-center"},"undefined"!==typeof t&&t.map((function(n,t){return c.a.createElement(p,Object.assign({behaviour:n,key:t},e))}))))))},v=t(17),w=function(e){var n=e.websocket,t=e.is_online,a=e.data,r={ws:n,is_online:t,peers:"undefined"!==typeof a?a.peers:[]};return c.a.createElement("div",null,c.a.createElement("h2",null,"System is ",c.a.createElement(v.a,{variant:t?"success":"secondary"},t?"online":"offline")),"undefined"!==typeof r.peers&&r.peers.map((function(e,n){return c.a.createElement(g,Object.assign({key:n,peer:e},r))})))},O=t(18),S=function(e){var n=e.children;return c.a.createElement(O.a,null,c.a.createElement(m.a,{style:{maxWidth:550}},c.a.createElement(u.a,null,n)))},y=function(){var e=Object(a.useState)(!1),n=Object(l.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(null),s=Object(l.a)(o,2),i=s[0],u=s[1],m=Object(a.useState)(),d=Object(l.a)(m,2),f=d[0],E=d[1],p=250;Object(a.useEffect)((function(){b()}),[]);var b=function(){var e,n=new WebSocket("ws://localhost:8000/ws");n.onopen=function(){console.log("connected websocket main component"),u(n),r(!0),p=250,clearTimeout(e)},n.onmessage=function(e){var n=JSON.parse(e.data);E(n),console.debug(n)},n.onclose=function(n){r(!1),console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(10,(p+p)/1e3)," second."),n.reason),p+=p,e=setTimeout(g,Math.min(1e4,p))},n.onerror=function(e){r(!1),console.error("Socket encountered error: ",e.message,"Closing socket"),n.close()}},g=function(){i&&i.readyState!=WebSocket.CLOSED||b()};return c.a.createElement(S,{className:"App"},c.a.createElement(w,{websocket:i,data:f,is_online:t}))};o.a.render(c.a.createElement(y,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.a8a14691.chunk.js.map